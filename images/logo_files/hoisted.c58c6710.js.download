import"./hoisted.6e378f8c.js";import{d as m,a as h}from"./index.30431de6.js";import{h as c}from"./index.b93551d5.js";import"./hoisted.e651b394.js";import"./lazy.ec63ec52.js";import"./index.08acff76.js";import"./index.49b7be11.js";import"./preload-helper.e8d31950.js";function g(){import.meta.url,import("data:text/javascript,").catch(()=>1);async function*e(){}g.g=e}const y='input[name="prfRealName"],input[name="prfCompanyName"]',f="_g6b",b="._q9b label",a={},p="sorry,there are some problems,please contract us...";document.addEventListener("down:prf",e=>{Object.assign(a,e.detail),_()});m("input",y,function(){this.parentElement.querySelector("span").hidden=!!this.value});let l=null;m("click",b,function(){this.classList.add(f),l=this},()=>{l&&(l.classList.remove(f),l=null)});m("click","._r9b",function(){const e=v();if(e){this.disabled=!0;const n="/api/message/vrf-name"+(a.isTeam?"-team":""),t={name:e.prfRealName,company_name:e.prfCompanyName,...a.data};(()=>a.isTeam?c.post(n,t):c.get(n,t))().then(s=>{this.disabled=!1,u(!1),s.status==1&&s.url?d(s.url):s.status==404&&alert(p)}).catch(()=>{this.disabled=!1})}});function v(){const{isTeam:e}=a,n=["prfRealName",e?"prfCompanyName":""],t=new Set,o={};for(const s of n){if(!s)continue;const i=document.querySelector('._q9b input[name="'.concat(s,'"]'));if(i){const r=i.value.trim();i.parentElement.classList[r?"remove":"add"]("_vzb"),r?o[i.name]=r:t.add(0)}}return t.size?null:o}function u(e){h(document,"dialog:toggle",{name:"prfActualName",show:e})}function d(e){const n=document.getElementById("down_prf_ifr");n?n.src=e:window.open(e)}async function _(){const e=a.data;if(!e)return;const n="/api/message/vrf-file"+(a.isTeam?"-team":"");c.get(n,{id:e.id,type:e.type,controller:e.controller}).then(t=>{if(t.status==1&&t.url)d(t.url);else if(!a.isTeam&&t.status==2)alert("sorry,you cannot download personal PRF");else if(t.status==404)alert(p);else{if(t.name){const o=document.querySelector('input[name="prfRealName"]');o&&(o.value=t.name)}u(!0)}}).then(a.resolve).catch(a.reject).finally(()=>{delete a.resolve,delete a.reject})}export{g as __vite_legacy_guard};